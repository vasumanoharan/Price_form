<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Management</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .items {
            background-color: antiquewhite;
        }
    </style>
</head>

<body>
    <div class="items">
        <h1 style="display: flex;justify-content: center;padding-top: 20px;padding-bottom: 20px;">Item Management</h1>

        <form id="itemForm"
            style="display: flex;flex-direction: column;justify-content: center;align-items: center;gap: 20px;">
            <div>
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>

            <div>
                <label for="price">Price:</label>
                <input type="number" id="price" name="price" step="0.01" required>
            </div>

            <div>
                <button type="button" onclick="addItem()">Add Item</button>
            </div>

        </form>
        <div style="display: flex;flex-direction: column;justify-content: center;align-items: center;margin-top: 20px;padding:50px;">
            <div>
                <input type="text" id="searchInput" placeholder="Search by name" oninput="searchItems()">
            </div>
            

            <h2>All Items</h2>
            <ul id="itemsList"></ul>
        </div>

    </div>


    <script>
        // Retrieve items from local storage or initialize an empty array
        const items = JSON.parse(localStorage.getItem('items')) || [];

        function addItem() {
            const nameInput = document.getElementById('name');
            const priceInput = document.getElementById('price');

            const name = nameInput.value;
            const price = parseFloat(priceInput.value);

            // Validate input
            if (!name || isNaN(price)) {
                alert('Please fill in all fields');
                return;
            }

            // Create a new item object
            const newItem = { name, price };

            // Add the new item object to the array
            items.push(newItem);

            // Save items to local storage
            localStorage.setItem('items', JSON.stringify(items));

            // Display the new item in the list
            displayItems();

            // Clear the form
            nameInput.value = '';
            priceInput.value = '';
        }

        function displayItems(itemsToDisplay = items) {
            const itemsList = document.getElementById('itemsList');
            itemsList.innerHTML = '';

            for (let i = 0; i < itemsToDisplay.length; i++) {
                const item = itemsToDisplay[i];

                const listItem = document.createElement('li');
                listItem.textContent = `Name: ${item.name}, Price: ${item.price}`;

                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = function () {
                    deleteItem(i);
                };

                listItem.appendChild(deleteButton);
                itemsList.appendChild(listItem);
            }
        }

        function deleteItem(index) {
            items.splice(index, 1);
            localStorage.setItem('items', JSON.stringify(items));
            displayItems();
        }

        function searchItems() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.toLowerCase();

            const filteredItems = items.filter(item => item.name.toLowerCase().includes(searchTerm));
            displayItems(filteredItems);
        }

        // Display existing items on page load
        displayItems();
    </script>

</body>

</html>
